(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const p of a.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&n(p)}).observe(document,{childList:!0,subtree:!0});function i(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(o){if(o.ep)return;o.ep=!0;const a=i(o);fetch(o.href,a)}})();function H(){const e=document.querySelector(".slides"),t=document.querySelectorAll(".slides figure"),i=document.getElementById("btnPrev"),n=document.getElementById("btnNext"),o=document.querySelectorAll(".dot");if(!e||t.length===0||!i||!n||o.length===0)return;let a=0;const p=t.length;let E=!1;function L(){E||(E=!0,e.style.transform=`translateX(-${a*100}%)`,o.forEach((b,D)=>{b.classList.remove("bg-white","scale-125"),b.classList.add("bg-white/50"),D===a&&(b.classList.add("bg-white","scale-125"),b.classList.remove("bg-white/50"))}),setTimeout(()=>{E=!1},700))}i.addEventListener("click",()=>{E||(a=(a-1+p)%p,L())}),n.addEventListener("click",()=>{E||(a=(a+1)%p,L())}),o.forEach((b,D)=>{b.addEventListener("click",()=>{E||(a=D,L())})}),setInterval(()=>{a=(a+1)%p,L()},3500),L()}const r={breakpoints:{MOBILE:640},animation:{DURATION:700,TRANSITION:200,SLIDE_DISTANCE:30,DELAY_SHORT:50},selectors:{SERVICE_CARD:".service-card",EXPANDED_PANEL:"#expanded-panel",MOBILE_PANEL:"mobile-panel",PANEL_CONTENT:"panel-content",CLOSE_BUTTON:"close-panel"},styles:{BORDER:"3px solid #3FA9F5",BOX_SHADOW:"0 10px 30px rgba(63, 169, 245, 0.3)",INSET_SHADOW:"inset 0 10px 20px -10px rgba(0,0,0,0.3), inset 0 -10px 20px -10px rgba(0,0,0,0.3)"}},ae={1:{title:"Construcción Residencial",description:"Especialistas en construcción de viviendas unifamiliares y edificios residenciales con los más altos estándares de calidad.",details:["Viviendas unifamiliares","Edificios residenciales","Rehabilitación integral","Proyectos llave en mano"]},2:{title:"Construcción Industrial",description:"Desarrollo de naves industriales y espacios comerciales adaptados a las necesidades de cada cliente.",details:["Naves industriales","Almacenes logísticos","Centros comerciales","Espacios corporativos"]},3:{title:"Reformas Integrales",description:"Renovación completa de espacios, transformando su hogar o negocio con diseño moderno y funcional.",details:["Reformas de viviendas","Locales comerciales","Oficinas","Diseño de interiores"]},4:{title:"Instalaciones y Mantenimiento",description:"Servicios completos de instalaciones eléctricas, fontanería y sistemas de climatización.",details:["Instalaciones eléctricas","Fontanería","Climatización","Mantenimiento preventivo"]},5:{title:"Gestión de Proyectos",description:"Coordinación integral de proyectos de construcción desde la planificación hasta la entrega final.",details:["Planificación de proyectos","Control de calidad","Gestión de presupuestos","Coordinación de equipos"]},6:{title:"Asesoría Técnica",description:"Consultoría especializada en soluciones constructivas, normativas y optimización de recursos.",details:["Consultoría técnica","Estudios de viabilidad","Asesoramiento normativo","Certificaciones energéticas"]}},l={currentServiceOpen:null,currentClickedCard:null,isAnimating:!1,expandedPanel:null,serviceCards:null,reset(){this.currentServiceOpen=null,this.currentClickedCard=null,this.expandedPanel=null},setCurrentService(e,t){this.currentServiceOpen=e,this.currentClickedCard=t},setAnimating(e){this.isAnimating=e}};function M(){return window.innerWidth<r.breakpoints.MOBILE}function h(e){return new Promise(t=>setTimeout(t,e))}function W(e){return e.offsetHeight}function Z(e){const t=ae[e],i=t.details.map(n=>`
    <div class="bg-white bg-opacity-70 backdrop-blur-sm rounded-lg p-3 sm:p-4 shadow-sm">
      <p class="text-gray-800 text-sm sm:text-base">✓ ${n}</p>
    </div>
  `).join("");return`
    <div id="${r.selectors.PANEL_CONTENT}" 
         class="bg-[rgba(242,242,242,0.9)] backdrop-blur-sm text-center py-8 sm:py-12 lg:py-16 px-4 sm:px-6 lg:px-8 transition-all duration-200 ease-out w-full" 
         style="box-shadow: ${r.styles.INSET_SHADOW};">
      <h2 class="text-2xl sm:text-3xl lg:text-4xl font-bold text-azul-oscuro mb-3 sm:mb-4">
        ${t.title}
      </h2>
      <p class="text-sm sm:text-base lg:text-lg text-gris-oscuro max-w-3xl mx-auto mb-6 sm:mb-8">
        ${t.description}
      </p>
      <div class="grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4 max-w-2xl mx-auto mb-6 sm:mb-8">
        ${i}
      </div>
      <button id="${r.selectors.CLOSE_BUTTON}" 
              class="bg-azul-oscuro text-white px-6 sm:px-8 py-2 sm:py-3 text-sm sm:text-base rounded-lg hover:bg-opacity-90 transition-all duration-300 shadow-md">
        Cerrar
      </button>
    </div>
  `}function le(e){return M()?ce(e):document.getElementById(r.selectors.EXPANDED_PANEL.substring(1))}function ce(e){let t=e.nextElementSibling;return t&&t.id===r.selectors.MOBILE_PANEL||(t=de(),e.parentNode.insertBefore(t,e.nextSibling)),t}function de(){const e=document.createElement("div");return e.id=r.selectors.MOBILE_PANEL,e.className="hidden transition-all duration-700 ease-in-out w-screen relative left-1/2 right-1/2 -ml-[50vw] -mr-[50vw]",e.style.opacity="0",e}function fe(){const e=document.getElementById(r.selectors.MOBILE_PANEL);e&&e!==l.expandedPanel&&(e.style.height="0",e.style.opacity="0",setTimeout(()=>e.remove(),r.animation.DURATION))}function F(e){ue(),e&&me(e)}function ue(){l.serviceCards.forEach(e=>{e.classList.remove("active-service-card"),e.style.border="",e.style.transform="",e.style.boxShadow=""})}function me(e){e.classList.add("active-service-card"),e.style.border=r.styles.BORDER,e.style.transform="scale(1.05)",e.style.boxShadow=r.styles.BOX_SHADOW}async function pe(e){e.innerHTML=Z(l.currentServiceOpen),e.style.height="0",e.style.overflow="hidden",e.classList.remove("hidden"),await h(r.animation.DELAY_SHORT),e.style.height="auto";const t=e.scrollHeight;e.style.height="0",W(e),await h(r.animation.DELAY_SHORT),e.style.height=`${t}px`,e.style.opacity="1",await h(r.animation.DURATION),e.style.height="auto",e.style.overflow="visible"}async function ge(e){const t=e.scrollHeight;e.style.height=`${t}px`,e.style.overflow="hidden",W(e),await h(r.animation.DELAY_SHORT),e.style.height="0",e.style.opacity="0",await h(r.animation.DURATION),e.classList.add("hidden"),e.innerHTML="",e.style.height="",e.style.overflow=""}async function he(e){if(l.isAnimating)return;l.setAnimating(!0);const t=document.getElementById(r.selectors.PANEL_CONTENT);t.style.transform=`translateY(-${r.animation.SLIDE_DISTANCE}px)`,t.style.opacity="0",await h(r.animation.TRANSITION),l.expandedPanel.innerHTML=Z(e);const i=document.getElementById(r.selectors.PANEL_CONTENT);i.style.transform=`translateY(${r.animation.SLIDE_DISTANCE}px)`,i.style.opacity="0",await h(r.animation.DELAY_SHORT),i.style.transform="translateY(0)",i.style.opacity="1",K(),l.setAnimating(!1)}async function q(e){const t=e.dataset.service;l.setCurrentService(t,e),F(e),M()&&fe(),l.expandedPanel=le(e),await pe(l.expandedPanel),K()}async function N(){l.expandedPanel&&(F(null),await ge(l.expandedPanel),l.expandedPanel.id===r.selectors.MOBILE_PANEL&&l.expandedPanel.remove(),l.reset())}async function ve(e){const t=e.dataset.service;l.currentServiceOpen===null?await q(e):l.currentServiceOpen!==t&&(M()?(await N(),await h(50),await q(e)):(l.setCurrentService(t,e),F(e),await he(t)))}function K(){const e=document.getElementById(r.selectors.CLOSE_BUTTON);e&&e.addEventListener("click",N)}function ye(){l.currentServiceOpen!==null&&N()}function Ee(){l.serviceCards.forEach(e=>{e.addEventListener("click",()=>ve(e))})}function be(){const e=[];return l.serviceCards.length||e.push("No se encontraron tarjetas de servicio"),document.getElementById(r.selectors.EXPANDED_PANEL.substring(1))||e.push("No se encontró el panel expandible"),e}function _(){l.serviceCards=document.querySelectorAll(r.selectors.SERVICE_CARD),!(be().length>0)&&(Ee(),window.addEventListener("resize",ye))}const S={1:{title:"Reforma Industrial Planta A",description:"Renovación completa de instalaciones industriales con actualización de maquinaria y sistemas de seguridad.",details:["Superficie: 2,500 m²","Duración: 6 meses","Año: 2023","Cliente: Empresa Industrial XYZ"],images:["https://via.placeholder.com/800x600/1E6091/ffffff?text=Reforma+Industrial+A+-+Imagen+1","https://via.placeholder.com/800x600/1E6091/ffffff?text=Reforma+Industrial+A+-+Imagen+2","https://via.placeholder.com/800x600/1E6091/ffffff?text=Reforma+Industrial+A+-+Imagen+3"]},2:{title:"Reforma Industrial Planta B",description:"Ampliación y modernización de nave industrial con nuevas instalaciones eléctricas y sistemas de climatización.",details:["Superficie: 3,200 m²","Duración: 8 meses","Año: 2023","Cliente: Logística Industrial SA"],images:["https://via.placeholder.com/800x600/1E6091/ffffff?text=Reforma+Industrial+B+-+Imagen+1","https://via.placeholder.com/800x600/1E6091/ffffff?text=Reforma+Industrial+B+-+Imagen+2","https://via.placeholder.com/800x600/1E6091/ffffff?text=Reforma+Industrial+B+-+Imagen+3"]},3:{title:"Reforma Industrial Planta C",description:"Rehabilitación integral de instalaciones con mejoras en eficiencia energética y sostenibilidad.",details:["Superficie: 1,800 m²","Duración: 5 meses","Año: 2024","Cliente: Manufactura Moderna SL"],images:["https://via.placeholder.com/800x600/1E6091/ffffff?text=Reforma+Industrial+C+-+Imagen+1","https://via.placeholder.com/800x600/1E6091/ffffff?text=Reforma+Industrial+C+-+Imagen+2","https://via.placeholder.com/800x600/1E6091/ffffff?text=Reforma+Industrial+C+-+Imagen+3"]},4:{title:"Instalación Eléctrica Edificio A",description:"Instalación completa de sistemas eléctricos con domótica KNX para edificio de oficinas.",details:["Superficie: 1,200 m²","Duración: 4 meses","Año: 2023","Cliente: Corporación Empresarial"],images:["https://via.placeholder.com/800x600/3FA9F5/ffffff?text=Instalacion+Electrica+A+-+Imagen+1","https://via.placeholder.com/800x600/3FA9F5/ffffff?text=Instalacion+Electrica+A+-+Imagen+2","https://via.placeholder.com/800x600/3FA9F5/ffffff?text=Instalacion+Electrica+A+-+Imagen+3"]},5:{title:"Instalación Eléctrica Edificio B",description:"Sistema eléctrico integral con tecnología de bajo consumo y paneles solares.",details:["Superficie: 950 m²","Duración: 3 meses","Año: 2024","Cliente: Green Building SA"],images:["https://via.placeholder.com/800x600/3FA9F5/ffffff?text=Instalacion+Electrica+B+-+Imagen+1","https://via.placeholder.com/800x600/3FA9F5/ffffff?text=Instalacion+Electrica+B+-+Imagen+2","https://via.placeholder.com/800x600/3FA9F5/ffffff?text=Instalacion+Electrica+B+-+Imagen+3"]},6:{title:"Instalación Eléctrica Edificio C",description:"Modernización de instalaciones eléctricas con sistemas de seguridad avanzados.",details:["Superficie: 1,500 m²","Duración: 5 meses","Año: 2024","Cliente: Tech Hub Center"],images:["https://via.placeholder.com/800x600/3FA9F5/ffffff?text=Instalacion+Electrica+C+-+Imagen+1","https://via.placeholder.com/800x600/3FA9F5/ffffff?text=Instalacion+Electrica+C+-+Imagen+2","https://via.placeholder.com/800x600/3FA9F5/ffffff?text=Instalacion+Electrica+C+-+Imagen+3"]},7:{title:"Reforma Integral Vivienda 1",description:"Reforma completa de vivienda unifamiliar con redistribución de espacios y nuevas instalaciones.",details:["Superficie: 180 m²","Duración: 3 meses","Año: 2023","Cliente: Particular"],images:["https://via.placeholder.com/800x600/0D3B66/ffffff?text=Reforma+Hogar+1+-+Imagen+1","https://via.placeholder.com/800x600/0D3B66/ffffff?text=Reforma+Hogar+1+-+Imagen+2","https://via.placeholder.com/800x600/0D3B66/ffffff?text=Reforma+Hogar+1+-+Imagen+3"]},8:{title:"Reforma Integral Vivienda 2",description:"Renovación de apartamento con cocina americana y baño completo, estilo moderno.",details:["Superficie: 95 m²","Duración: 2 meses","Año: 2024","Cliente: Particular"],images:["https://via.placeholder.com/800x600/0D3B66/ffffff?text=Reforma+Hogar+2+-+Imagen+1","https://via.placeholder.com/800x600/0D3B66/ffffff?text=Reforma+Hogar+2+-+Imagen+2","https://via.placeholder.com/800x600/0D3B66/ffffff?text=Reforma+Hogar+2+-+Imagen+3"]},9:{title:"Reforma Integral Vivienda 3",description:"Rehabilitación de casa antigua conservando elementos originales con instalaciones modernas.",details:["Superficie: 220 m²","Duración: 4 meses","Año: 2024","Cliente: Particular"],images:["https://via.placeholder.com/800x600/0D3B66/ffffff?text=Reforma+Hogar+3+-+Imagen+1","https://via.placeholder.com/800x600/0D3B66/ffffff?text=Reforma+Hogar+3+-+Imagen+2","https://via.placeholder.com/800x600/0D3B66/ffffff?text=Reforma+Hogar+3+-+Imagen+3"]}};let J="reformas-industriales",y=null,m=0,v=!1,B=0,P=0,C=null,A=null,f=null,Q=null,ee=null,te=null,d=null,w=null,$=null,k=null,j=null;function z(e){if(v)return;J=e,v=!0,C.forEach(n=>{n.dataset.filter===e?n.classList.add("text-[var(--acento)]","scale-110"):n.classList.remove("text-[var(--acento)]","scale-110")});const t=Array.from(A).filter(n=>n.dataset.category!==e&&!n.classList.contains("hidden")),i=Array.from(A).filter(n=>n.dataset.category===e);t.forEach((n,o)=>{setTimeout(()=>{n.style.opacity="0",n.style.transform="scale(0.9)"},o*50)}),setTimeout(()=>{t.forEach(n=>{n.classList.add("hidden"),n.style.opacity="",n.style.transform=""}),i.forEach((n,o)=>{n.classList.remove("hidden"),n.style.opacity="0",n.style.transform="translateY(30px) scale(0.95)",setTimeout(()=>{n.style.transition="all 0.6s cubic-bezier(0.34, 1.56, 0.64, 1)",n.style.opacity="1",n.style.transform="translateY(0) scale(1)"},o*100)}),setTimeout(()=>{v=!1,i.forEach(n=>{n.style.transition=""})},i.length*100+600)},t.length*50+300)}function X(e){const t=S[e];if(!t)return;y=e,m=0,Q.textContent=t.title,ee.textContent=t.description,te.innerHTML=t.details.map((n,o)=>`<li class="flex items-start opacity-0" style="animation: fadeInUp 0.5s ease forwards ${o*.1}s">
      <span class="text-[var(--acento)] mr-2">•</span>
      <span>${n}</span>
    </li>`).join("");const i=new Image;i.onload=()=>{d.src=t.images[m],d.style.opacity="1"},i.src=t.images[m],f.classList.remove("hidden"),f.classList.add("flex"),f.style.opacity="0",requestAnimationFrame(()=>{f.style.transition="opacity 0.3s ease",f.style.opacity="1"}),document.body.style.overflow="hidden",document.body.style.position="fixed",document.body.style.width="100%",document.body.style.top=`-${window.scrollY}px`,t.images.slice(1).forEach(n=>{const o=new Image;o.src=n})}function T(){f.style.opacity="0",setTimeout(()=>{f.classList.add("hidden"),f.classList.remove("flex");const e=document.body.style.top;document.body.style.position="",document.body.style.top="",document.body.style.width="",document.body.style.overflow="",window.scrollTo(0,parseInt(e||"0")*-1),y=null,m=0,f.style.opacity=""},300)}function ie(e="next"){if(!y||v)return;v=!0;const t=S[y],i=e==="next"?"translateX(-100px)":"translateX(100px)";d.style.transition="all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",d.style.opacity="0",d.style.transform=i,setTimeout(()=>{d.src=t.images[m];const n=e==="next"?"translateX(100px)":"translateX(-100px)";d.style.transition="none",d.style.transform=n,d.offsetHeight,d.style.transition="all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",d.style.opacity="1",d.style.transform="translateX(0)",setTimeout(()=>{v=!1,d.style.transition="",d.style.transform=""},300)},300)}function O(){if(!y||v)return;const e=S[y];m=(m-1+e.images.length)%e.images.length,ie("prev")}function R(){if(!y||v)return;const e=S[y];m=(m+1)%e.images.length,ie("next")}function xe(e){B=e.changedTouches[0].screenX}function Le(e){P=e.changedTouches[0].screenX,Ie()}function Ie(){P<B-50&&R(),P>B+50&&O()}function Ae(){if(document.getElementById("projects-animations"))return;const e=document.createElement("style");e.id="projects-animations",e.textContent=`
    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
  `,document.head.appendChild(e)}function Y(){Ae(),C=document.querySelectorAll(".filter-btn"),A=document.querySelectorAll(".project-card"),f=document.getElementById("project-modal"),Q=document.getElementById("modal-title"),ee=document.getElementById("modal-description"),te=document.getElementById("modal-details"),d=document.getElementById("carousel-image"),w=document.getElementById("carousel-container"),$=document.getElementById("carousel-prev"),k=document.getElementById("carousel-next"),j=document.getElementById("modal-close"),!(!C.length||!A.length||!f)&&(C.forEach(e=>{e.addEventListener("click",()=>{z(e.dataset.filter)})}),A.forEach(e=>{e.addEventListener("click",()=>{const t=e.dataset.project;X(t)}),e.setAttribute("tabindex","0"),e.addEventListener("keydown",t=>{if(t.key==="Enter"||t.key===" "){t.preventDefault();const i=e.dataset.project;X(i)}})}),j.addEventListener("click",T),$.addEventListener("click",O),k.addEventListener("click",R),w&&(w.addEventListener("touchstart",xe,{passive:!0}),w.addEventListener("touchend",Le,{passive:!0})),f.addEventListener("click",e=>{e.target===f&&T()}),document.addEventListener("keydown",e=>{e.key==="Escape"&&!f.classList.contains("hidden")&&T()}),document.addEventListener("keydown",e=>{f.classList.contains("hidden")||(e.key==="ArrowLeft"?(e.preventDefault(),O()):e.key==="ArrowRight"&&(e.preventDefault(),R()))}),z(J))}const c={validation:{nombre:{minLength:3,maxLength:100,pattern:/^[a-záéíóúñA-ZÁÉÍÓÚÑ\s]+$/,errorMessages:{empty:"El nombre es obligatorio",minLength:"El nombre debe tener al menos 3 caracteres",pattern:"El nombre solo puede contener letras y espacios"}},telefono:{pattern:/^[0-9]{9,15}$/,errorMessages:{empty:"El teléfono es obligatorio",pattern:"El teléfono debe tener entre 9 y 15 dígitos"}},email:{pattern:/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,6}$/,errorMessages:{empty:"El email es obligatorio",pattern:"El email no tiene un formato válido"}},descripcion:{minLength:20,maxLength:1e3,errorMessages:{empty:"La descripción del proyecto es obligatoria",minLength:"La descripción debe tener al menos 20 caracteres",maxLength:"La descripción no puede superar los 1000 caracteres"}},fotos:{maxFiles:5,maxSize:5*1024*1024,allowedTypes:["image/jpeg","image/jpg","image/png","image/webp"],errorMessages:{maxFiles:"Solo puedes subir un máximo de 5 fotos",maxSize:"Cada foto no puede superar los 5MB",invalidType:"Solo se permiten archivos JPG, PNG o WEBP"}}},selectors:{form:"#contact-form",fields:{nombre:"#nombre",telefono:"#telefono",email:"#email",descripcion:"#descripcion",fotos:"#fotos",privacidad:"#privacidad"},dropArea:"#drop-area",previewContainer:"#preview-container",photoCounter:"#photo-counter",photoCount:"#photo-count",submitButton:"#submit-button",buttonText:"#button-text",buttonLoading:"#button-loading",formMessage:"#form-message"}},u={isSubmitting:!1,selectedFiles:[],validationErrors:{}};let s={};function I(e,t){const i=c.validation[e];return i?!t||t.trim()===""?{valid:!1,error:i.errorMessages.empty}:i.minLength&&t.length<i.minLength?{valid:!1,error:i.errorMessages.minLength}:i.maxLength&&t.length>i.maxLength?{valid:!1,error:i.errorMessages.maxLength}:i.pattern&&!i.pattern.test(t)?{valid:!1,error:i.errorMessages.pattern}:{valid:!0}:{valid:!0}}function we(e){const t=c.validation.fotos,i=[];if(e.length>t.maxFiles)return{valid:!1,error:t.errorMessages.maxFiles};for(let n=0;n<e.length;n++){const o=e[n];t.allowedTypes.includes(o.type)||i.push(`${o.name}: ${t.errorMessages.invalidType}`),o.size>t.maxSize&&i.push(`${o.name}: ${t.errorMessages.maxSize}`)}return i.length>0?{valid:!1,error:i.join(`
`)}:{valid:!0}}function x(e,t){const i=s.fields[e];if(!i)return;i.classList.add("border-red-500","focus:ring-red-500"),i.classList.remove("border-gray-300","focus:ring-[#0D3B66]");const n=i.parentElement.querySelector(".error-message");n&&(n.textContent=t,n.classList.remove("hidden")),u.validationErrors[e]=t}function g(e){const t=s.fields[e];if(!t)return;t.classList.remove("border-red-500","focus:ring-red-500"),t.classList.add("border-gray-300","focus:ring-[#0D3B66]");const i=t.parentElement.querySelector(".error-message");i&&(i.textContent="",i.classList.add("hidden")),delete u.validationErrors[e]}function Ce(){let e=!0;return["nombre","telefono","email","descripcion"].forEach(t=>{const i=s.fields[t];if(!i)return;const n=I(t,i.value);n.valid?g(t):(x(t,n.error),e=!1)}),s.fields.privacidad.checked?g("privacidad"):(x("privacidad","Debes aceptar la política de privacidad"),e=!1),e}function ne(e){const t=we(e);if(!t.valid){alert(t.error);return}u.selectedFiles=Array.from(e),se(u.selectedFiles),oe()}function se(e){s.previewContainer.innerHTML="",s.previewContainer.classList.remove("hidden"),e.forEach((t,i)=>{const n=new FileReader;n.onload=o=>{const a=Se(o.target.result,t.name,i);s.previewContainer.appendChild(a)},n.readAsDataURL(t)})}function Se(e,t,i){const n=document.createElement("div");return n.className="relative group",n.innerHTML=`
    <img src="${e}" alt="${t}" 
         class="w-full h-24 sm:h-32 object-cover rounded-lg border-2 border-gray-200 group-hover:border-[#0D3B66] transition-all">
    
    <button type="button" 
            class="absolute top-1 right-1 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center hover:bg-red-600 transition-all shadow-md opacity-0 group-hover:opacity-100"
            onclick="window.contactForm.removeImage(${i})"
            title="Eliminar imagen">
      ✕
    </button>
    
    <p class="text-xs text-gray-600 mt-1 truncate" title="${t}">
      ${t}
    </p>
  `,n}function De(e){u.selectedFiles.splice(e,1),u.selectedFiles.length===0?(s.previewContainer.classList.add("hidden"),s.photoCounter.classList.add("hidden"),s.fields.fotos.value=""):se(u.selectedFiles),oe()}function oe(){const e=u.selectedFiles.length;e===0?s.photoCounter.classList.add("hidden"):(s.photoCounter.classList.remove("hidden"),s.photoCount.textContent=e)}function Te(e){e.preventDefault(),e.stopPropagation(),s.dropArea.classList.add("border-[#0D3B66]","bg-blue-50")}function Be(e){e.preventDefault(),e.stopPropagation(),s.dropArea.classList.remove("border-[#0D3B66]","bg-blue-50")}function Pe(e){e.preventDefault(),e.stopPropagation(),s.dropArea.classList.remove("border-[#0D3B66]","bg-blue-50");const t=e.dataTransfer.files;t.length>0&&ne(t)}function U(e,t){s.formMessage.classList.remove("hidden","bg-green-100","bg-red-100","text-green-800","text-red-800"),s.formMessage.classList.add("bg-red-100","text-red-800"),s.formMessage.textContent=t,s.formMessage.scrollIntoView({behavior:"smooth",block:"nearest"}),setTimeout(()=>{s.formMessage.classList.add("hidden")},5e3)}function G(e){u.isSubmitting=e,e?(s.submitButton.disabled=!0,s.submitButton.classList.add("opacity-50","cursor-not-allowed"),s.buttonText.classList.add("hidden"),s.buttonLoading.classList.remove("hidden")):(s.submitButton.disabled=!1,s.submitButton.classList.remove("opacity-50","cursor-not-allowed"),s.buttonText.classList.remove("hidden"),s.buttonLoading.classList.add("hidden"))}function Oe(){const e=new FormData(s.form);return e.delete("fotos"),u.selectedFiles.forEach(t=>{e.append("fotos",t)}),e}async function Re(e){if(e.preventDefault(),!u.isSubmitting){if(!Ce()){U("error","Por favor, corrige los errores antes de enviar el formulario");return}G(!0);try{const t=Oe(),i=await fetch(s.form.action||"/contact/",{method:"POST",body:t,redirect:"follow"});if(i.ok||i.redirected)window.location.href=i.url;else throw new Error(`Error del servidor: ${i.status}`)}catch{U("error","Hubo un error al enviar el formulario. Por favor, inténtalo de nuevo."),G(!1)}}}function Me(){s.fields.nombre.addEventListener("blur",()=>{const e=I("nombre",s.fields.nombre.value);e.valid?g("nombre"):x("nombre",e.error)}),s.fields.telefono.addEventListener("blur",()=>{const e=I("telefono",s.fields.telefono.value);e.valid?g("telefono"):x("telefono",e.error)}),s.fields.email.addEventListener("blur",()=>{const e=I("email",s.fields.email.value);e.valid?g("email"):x("email",e.error)}),s.fields.descripcion.addEventListener("blur",()=>{const e=I("descripcion",s.fields.descripcion.value);e.valid?g("descripcion"):x("descripcion",e.error)}),["nombre","telefono","email","descripcion"].forEach(e=>{s.fields[e].addEventListener("input",()=>{u.validationErrors[e]&&g(e)})}),s.fields.privacidad.addEventListener("change",()=>{s.fields.privacidad.checked&&g("privacidad")}),s.fields.fotos.addEventListener("change",e=>{e.target.files.length>0&&ne(e.target.files)}),s.dropArea.addEventListener("click",()=>{s.fields.fotos.click()}),s.dropArea.addEventListener("dragover",Te),s.dropArea.addEventListener("dragleave",Be),s.dropArea.addEventListener("drop",Pe),s.form.addEventListener("submit",Re)}function V(){const e=document.querySelector(c.selectors.form);!e||(s={form:e,fields:{nombre:document.querySelector(c.selectors.fields.nombre),telefono:document.querySelector(c.selectors.fields.telefono),email:document.querySelector(c.selectors.fields.email),descripcion:document.querySelector(c.selectors.fields.descripcion),fotos:document.querySelector(c.selectors.fields.fotos),privacidad:document.querySelector(c.selectors.fields.privacidad)},dropArea:document.querySelector(c.selectors.dropArea),previewContainer:document.querySelector(c.selectors.previewContainer),photoCounter:document.querySelector(c.selectors.photoCounter),photoCount:document.querySelector(c.selectors.photoCount),submitButton:document.querySelector(c.selectors.submitButton),buttonText:document.querySelector(c.selectors.buttonText),buttonLoading:document.querySelector(c.selectors.buttonLoading),formMessage:document.querySelector(c.selectors.formMessage)},Object.entries(s.fields).filter(([i,n])=>!n).map(([i])=>i).length>0)||(Me(),window.contactForm={removeImage:De})}const re=window.matchMedia("(prefers-reduced-motion: reduce)").matches;function Fe(){if(re){document.querySelectorAll(".reveal").forEach(t=>{t.classList.add("visible")});return}const e=new IntersectionObserver(t=>{t.forEach(i=>{if(i.isIntersecting){const n=i.target.dataset.delay||0;setTimeout(()=>{i.target.classList.add("visible")},Number(n)),e.unobserve(i.target)}})},{threshold:.15,rootMargin:"0px 0px -40px 0px"});document.querySelectorAll(".reveal").forEach(t=>e.observe(t))}function Ne(){const e=document.querySelector("header");if(!e)return;let t=!1;window.addEventListener("scroll",()=>{t||(window.requestAnimationFrame(()=>{window.scrollY>20?e.classList.add("header-scrolled"):e.classList.remove("header-scrolled"),t=!1}),t=!0)})}function He(){if(re)return;const e=document.querySelectorAll(".timeline-node");if(e.length===0)return;const t=new IntersectionObserver(i=>{i.forEach(n=>{n.isIntersecting&&(n.target.classList.add("visible"),t.unobserve(n.target))})},{threshold:.5});e.forEach(i=>t.observe(i))}function qe(){Fe(),Ne(),He()}document.addEventListener("DOMContentLoaded",()=>{qe(),typeof H=="function"&&H(),typeof _=="function"&&_(),typeof Y=="function"&&Y(),typeof V=="function"&&V(),_e()});function _e(){const e=document.getElementById("menuToggle"),t=document.getElementById("mobileMenu");e&&t&&e.addEventListener("click",()=>{const i=!t.classList.contains("hidden");t.classList.toggle("hidden"),i?e.classList.remove("shadow-inner","bg-white/20","scale-95"):e.classList.add("shadow-inner","bg-white/20","scale-95")})}
