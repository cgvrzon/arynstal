(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const g of r.addedNodes)g.tagName==="LINK"&&g.rel==="modulepreload"&&o(g)}).observe(document,{childList:!0,subtree:!0});function i(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function o(s){if(s.ep)return;s.ep=!0;const r=i(s);fetch(s.href,r)}})();function z(){const e=document.querySelector(".slides"),t=document.querySelectorAll(".slides figure"),i=document.getElementById("btnPrev"),o=document.getElementById("btnNext"),s=document.querySelectorAll(".dot");if(!e||t.length===0||!i||!o||s.length===0)return;let r=0;const g=t.length;let E=!1;function L(){E||(E=!0,e.style.transform=`translateX(-${r*100}%)`,s.forEach((x,D)=>{x.classList.remove("bg-white","scale-125"),x.classList.add("bg-white/50"),D===r&&(x.classList.add("bg-white","scale-125"),x.classList.remove("bg-white/50"))}),setTimeout(()=>{E=!1},700))}i.addEventListener("click",()=>{E||(r=(r-1+g)%g,L())}),o.addEventListener("click",()=>{E||(r=(r+1)%g,L())}),s.forEach((x,D)=>{x.addEventListener("click",()=>{E||(r=D,L())})}),setInterval(()=>{r=(r+1)%g,L()},3500),L()}const a={breakpoints:{MOBILE:1024},animation:{DURATION:700,TRANSITION:200,SLIDE_DISTANCE:30,DELAY_SHORT:50},selectors:{SERVICE_CARD:".service-card",EXPANDED_PANEL:"#expanded-panel",MOBILE_PANEL:"mobile-panel",PANEL_CONTENT:"panel-content",CLOSE_BUTTON:"close-panel"},styles:{BORDER:"3px solid #3FA9F5",BOX_SHADOW:"0 10px 30px rgba(63, 169, 245, 0.3)",INSET_SHADOW:"inset 0 10px 20px -10px rgba(0,0,0,0.3), inset 0 -10px 20px -10px rgba(0,0,0,0.3)"}},ae={1:{title:"Construcci√≥n Residencial",description:"Especialistas en construcci√≥n de viviendas unifamiliares y edificios residenciales con los m√°s altos est√°ndares de calidad.",details:["Viviendas unifamiliares","Edificios residenciales","Rehabilitaci√≥n integral","Proyectos llave en mano"]},2:{title:"Construcci√≥n Industrial",description:"Desarrollo de naves industriales y espacios comerciales adaptados a las necesidades de cada cliente.",details:["Naves industriales","Almacenes log√≠sticos","Centros comerciales","Espacios corporativos"]},3:{title:"Reformas Integrales",description:"Renovaci√≥n completa de espacios, transformando su hogar o negocio con dise√±o moderno y funcional.",details:["Reformas de viviendas","Locales comerciales","Oficinas","Dise√±o de interiores"]},4:{title:"Instalaciones y Mantenimiento",description:"Servicios completos de instalaciones el√©ctricas, fontaner√≠a y sistemas de climatizaci√≥n.",details:["Instalaciones el√©ctricas","Fontaner√≠a","Climatizaci√≥n","Mantenimiento preventivo"]},5:{title:"Gesti√≥n de Proyectos",description:"Coordinaci√≥n integral de proyectos de construcci√≥n desde la planificaci√≥n hasta la entrega final.",details:["Planificaci√≥n de proyectos","Control de calidad","Gesti√≥n de presupuestos","Coordinaci√≥n de equipos"]},6:{title:"Asesor√≠a T√©cnica",description:"Consultor√≠a especializada en soluciones constructivas, normativas y optimizaci√≥n de recursos.",details:["Consultor√≠a t√©cnica","Estudios de viabilidad","Asesoramiento normativo","Certificaciones energ√©ticas"]}},l={currentServiceOpen:null,currentClickedCard:null,isAnimating:!1,expandedPanel:null,serviceCards:null,reset(){this.currentServiceOpen=null,this.currentClickedCard=null,this.expandedPanel=null},setCurrentService(e,t){this.currentServiceOpen=e,this.currentClickedCard=t},setAnimating(e){this.isAnimating=e}};function M(){return window.innerWidth<a.breakpoints.MOBILE}function v(e){return new Promise(t=>setTimeout(t,e))}function W(e){return e.offsetHeight}function Z(e){const t=ae[e],i=t.details.map(o=>`
    <div class="bg-white bg-opacity-70 backdrop-blur-sm rounded-lg p-3 sm:p-4 shadow-sm">
      <p class="text-gray-800 text-sm sm:text-base">‚úì ${o}</p>
    </div>
  `).join("");return`
    <div id="${a.selectors.PANEL_CONTENT}" 
         class="bg-[rgba(242,242,242,0.9)] backdrop-blur-sm text-center py-8 sm:py-12 lg:py-16 px-4 sm:px-6 lg:px-8 transition-all duration-200 ease-out w-full" 
         style="box-shadow: ${a.styles.INSET_SHADOW};">
      <h2 class="text-2xl sm:text-3xl lg:text-4xl font-bold text-azul-oscuro mb-3 sm:mb-4">
        ${t.title}
      </h2>
      <p class="text-sm sm:text-base lg:text-lg text-gris-oscuro max-w-3xl mx-auto mb-6 sm:mb-8">
        ${t.description}
      </p>
      <div class="grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4 max-w-2xl mx-auto mb-6 sm:mb-8">
        ${i}
      </div>
      <button id="${a.selectors.CLOSE_BUTTON}" 
              class="bg-azul-oscuro text-white px-6 sm:px-8 py-2 sm:py-3 text-sm sm:text-base rounded-lg hover:bg-opacity-90 transition-all duration-300 shadow-md">
        Cerrar
      </button>
    </div>
  `}function re(e){return M()?le(e):document.getElementById(a.selectors.EXPANDED_PANEL.substring(1))}function le(e){let t=e.nextElementSibling;return t&&t.id===a.selectors.MOBILE_PANEL||(t=ce(),e.parentNode.insertBefore(t,e.nextSibling)),t}function ce(){const e=document.createElement("div");return e.id=a.selectors.MOBILE_PANEL,e.className="hidden transition-all duration-700 ease-in-out w-screen relative left-1/2 right-1/2 -ml-[50vw] -mr-[50vw]",e.style.opacity="0",e}function de(){const e=document.getElementById(a.selectors.MOBILE_PANEL);e&&e!==l.expandedPanel&&(e.style.height="0",e.style.opacity="0",setTimeout(()=>e.remove(),a.animation.DURATION))}function N(e){fe(),e&&me(e)}function fe(){l.serviceCards.forEach(e=>{e.classList.remove("active-service-card"),e.style.border="",e.style.transform="",e.style.boxShadow=""})}function me(e){e.classList.add("active-service-card"),e.style.border=a.styles.BORDER,e.style.transform="scale(1.05)",e.style.boxShadow=a.styles.BOX_SHADOW}async function ue(e){e.innerHTML=Z(l.currentServiceOpen),e.style.height="0",e.style.overflow="hidden",e.classList.remove("hidden"),await v(a.animation.DELAY_SHORT),e.style.height="auto";const t=e.scrollHeight;e.style.height="0",W(e),await v(a.animation.DELAY_SHORT),e.style.height=`${t}px`,e.style.opacity="1",await v(a.animation.DURATION),e.style.height="auto",e.style.overflow="visible"}async function pe(e){const t=e.scrollHeight;e.style.height=`${t}px`,e.style.overflow="hidden",W(e),await v(a.animation.DELAY_SHORT),e.style.height="0",e.style.opacity="0",await v(a.animation.DURATION),e.classList.add("hidden"),e.innerHTML="",e.style.height="",e.style.overflow=""}async function ge(e){if(l.isAnimating)return;l.setAnimating(!0);const t=document.getElementById(a.selectors.PANEL_CONTENT);t.style.transform=`translateY(-${a.animation.SLIDE_DISTANCE}px)`,t.style.opacity="0",await v(a.animation.TRANSITION),l.expandedPanel.innerHTML=Z(e);const i=document.getElementById(a.selectors.PANEL_CONTENT);i.style.transform=`translateY(${a.animation.SLIDE_DISTANCE}px)`,i.style.opacity="0",await v(a.animation.DELAY_SHORT),i.style.transform="translateY(0)",i.style.opacity="1",J(),l.setAnimating(!1)}async function _(e){const t=e.dataset.service;l.setCurrentService(t,e),N(e),M()&&de(),l.expandedPanel=re(e),await ue(l.expandedPanel),J()}async function H(){l.expandedPanel&&(N(null),await pe(l.expandedPanel),l.expandedPanel.id===a.selectors.MOBILE_PANEL&&l.expandedPanel.remove(),l.reset())}async function ve(e){const t=e.dataset.service;l.currentServiceOpen===null?await _(e):l.currentServiceOpen!==t&&(M()?(await H(),await v(50),await _(e)):(l.setCurrentService(t,e),N(e),await ge(t)))}function J(){const e=document.getElementById(a.selectors.CLOSE_BUTTON);e&&e.addEventListener("click",H)}function he(){l.currentServiceOpen!==null&&H()}function ye(){l.serviceCards.forEach(e=>{e.addEventListener("click",()=>ve(e))})}function Ee(){const e=[];return l.serviceCards.length||e.push("No se encontraron tarjetas de servicio"),document.getElementById(a.selectors.EXPANDED_PANEL.substring(1))||e.push("No se encontr√≥ el panel expandible"),e}function j(){l.serviceCards=document.querySelectorAll(a.selectors.SERVICE_CARD),console.log("ServicesGrid Debug:",{serviceCards:l.serviceCards.length,expandedPanel:!!document.getElementById(a.selectors.EXPANDED_PANEL.substring(1))});const e=Ee();if(e.length>0){console.warn("ServicesGrid:",e.join(", "));return}ye(),window.addEventListener("resize",he),console.log("ServicesGrid: Inicializado correctamente ‚úì")}const w={1:{title:"Reforma Industrial Planta A",description:"Renovaci√≥n completa de instalaciones industriales con actualizaci√≥n de maquinaria y sistemas de seguridad.",details:["Superficie: 2,500 m¬≤","Duraci√≥n: 6 meses","A√±o: 2023","Cliente: Empresa Industrial XYZ"],images:["https://via.placeholder.com/800x600/1E6091/ffffff?text=Reforma+Industrial+A+-+Imagen+1","https://via.placeholder.com/800x600/1E6091/ffffff?text=Reforma+Industrial+A+-+Imagen+2","https://via.placeholder.com/800x600/1E6091/ffffff?text=Reforma+Industrial+A+-+Imagen+3"]},2:{title:"Reforma Industrial Planta B",description:"Ampliaci√≥n y modernizaci√≥n de nave industrial con nuevas instalaciones el√©ctricas y sistemas de climatizaci√≥n.",details:["Superficie: 3,200 m¬≤","Duraci√≥n: 8 meses","A√±o: 2023","Cliente: Log√≠stica Industrial SA"],images:["https://via.placeholder.com/800x600/1E6091/ffffff?text=Reforma+Industrial+B+-+Imagen+1","https://via.placeholder.com/800x600/1E6091/ffffff?text=Reforma+Industrial+B+-+Imagen+2","https://via.placeholder.com/800x600/1E6091/ffffff?text=Reforma+Industrial+B+-+Imagen+3"]},3:{title:"Reforma Industrial Planta C",description:"Rehabilitaci√≥n integral de instalaciones con mejoras en eficiencia energ√©tica y sostenibilidad.",details:["Superficie: 1,800 m¬≤","Duraci√≥n: 5 meses","A√±o: 2024","Cliente: Manufactura Moderna SL"],images:["https://via.placeholder.com/800x600/1E6091/ffffff?text=Reforma+Industrial+C+-+Imagen+1","https://via.placeholder.com/800x600/1E6091/ffffff?text=Reforma+Industrial+C+-+Imagen+2","https://via.placeholder.com/800x600/1E6091/ffffff?text=Reforma+Industrial+C+-+Imagen+3"]},4:{title:"Instalaci√≥n El√©ctrica Edificio A",description:"Instalaci√≥n completa de sistemas el√©ctricos con dom√≥tica KNX para edificio de oficinas.",details:["Superficie: 1,200 m¬≤","Duraci√≥n: 4 meses","A√±o: 2023","Cliente: Corporaci√≥n Empresarial"],images:["https://via.placeholder.com/800x600/3FA9F5/ffffff?text=Instalacion+Electrica+A+-+Imagen+1","https://via.placeholder.com/800x600/3FA9F5/ffffff?text=Instalacion+Electrica+A+-+Imagen+2","https://via.placeholder.com/800x600/3FA9F5/ffffff?text=Instalacion+Electrica+A+-+Imagen+3"]},5:{title:"Instalaci√≥n El√©ctrica Edificio B",description:"Sistema el√©ctrico integral con tecnolog√≠a de bajo consumo y paneles solares.",details:["Superficie: 950 m¬≤","Duraci√≥n: 3 meses","A√±o: 2024","Cliente: Green Building SA"],images:["https://via.placeholder.com/800x600/3FA9F5/ffffff?text=Instalacion+Electrica+B+-+Imagen+1","https://via.placeholder.com/800x600/3FA9F5/ffffff?text=Instalacion+Electrica+B+-+Imagen+2","https://via.placeholder.com/800x600/3FA9F5/ffffff?text=Instalacion+Electrica+B+-+Imagen+3"]},6:{title:"Instalaci√≥n El√©ctrica Edificio C",description:"Modernizaci√≥n de instalaciones el√©ctricas con sistemas de seguridad avanzados.",details:["Superficie: 1,500 m¬≤","Duraci√≥n: 5 meses","A√±o: 2024","Cliente: Tech Hub Center"],images:["https://via.placeholder.com/800x600/3FA9F5/ffffff?text=Instalacion+Electrica+C+-+Imagen+1","https://via.placeholder.com/800x600/3FA9F5/ffffff?text=Instalacion+Electrica+C+-+Imagen+2","https://via.placeholder.com/800x600/3FA9F5/ffffff?text=Instalacion+Electrica+C+-+Imagen+3"]},7:{title:"Reforma Integral Vivienda 1",description:"Reforma completa de vivienda unifamiliar con redistribuci√≥n de espacios y nuevas instalaciones.",details:["Superficie: 180 m¬≤","Duraci√≥n: 3 meses","A√±o: 2023","Cliente: Particular"],images:["https://via.placeholder.com/800x600/0D3B66/ffffff?text=Reforma+Hogar+1+-+Imagen+1","https://via.placeholder.com/800x600/0D3B66/ffffff?text=Reforma+Hogar+1+-+Imagen+2","https://via.placeholder.com/800x600/0D3B66/ffffff?text=Reforma+Hogar+1+-+Imagen+3"]},8:{title:"Reforma Integral Vivienda 2",description:"Renovaci√≥n de apartamento con cocina americana y ba√±o completo, estilo moderno.",details:["Superficie: 95 m¬≤","Duraci√≥n: 2 meses","A√±o: 2024","Cliente: Particular"],images:["https://via.placeholder.com/800x600/0D3B66/ffffff?text=Reforma+Hogar+2+-+Imagen+1","https://via.placeholder.com/800x600/0D3B66/ffffff?text=Reforma+Hogar+2+-+Imagen+2","https://via.placeholder.com/800x600/0D3B66/ffffff?text=Reforma+Hogar+2+-+Imagen+3"]},9:{title:"Reforma Integral Vivienda 3",description:"Rehabilitaci√≥n de casa antigua conservando elementos originales con instalaciones modernas.",details:["Superficie: 220 m¬≤","Duraci√≥n: 4 meses","A√±o: 2024","Cliente: Particular"],images:["https://via.placeholder.com/800x600/0D3B66/ffffff?text=Reforma+Hogar+3+-+Imagen+1","https://via.placeholder.com/800x600/0D3B66/ffffff?text=Reforma+Hogar+3+-+Imagen+2","https://via.placeholder.com/800x600/0D3B66/ffffff?text=Reforma+Hogar+3+-+Imagen+3"]}};let K="reformas-industriales",y=null,p=0,h=!1,P=0,O=0,S=null,A=null,f=null,Q=null,ee=null,te=null,d=null,C=null,$=null,k=null,q=null;function X(e){if(h)return;K=e,h=!0,S.forEach(o=>{o.dataset.filter===e?o.classList.add("text-[var(--acento)]","scale-110"):o.classList.remove("text-[var(--acento)]","scale-110")});const t=Array.from(A).filter(o=>o.dataset.category!==e&&!o.classList.contains("hidden")),i=Array.from(A).filter(o=>o.dataset.category===e);t.forEach((o,s)=>{setTimeout(()=>{o.style.opacity="0",o.style.transform="scale(0.9)"},s*50)}),setTimeout(()=>{t.forEach(o=>{o.classList.add("hidden"),o.style.opacity="",o.style.transform=""}),i.forEach((o,s)=>{o.classList.remove("hidden"),o.style.opacity="0",o.style.transform="translateY(30px) scale(0.95)",setTimeout(()=>{o.style.transition="all 0.6s cubic-bezier(0.34, 1.56, 0.64, 1)",o.style.opacity="1",o.style.transform="translateY(0) scale(1)"},s*100)}),setTimeout(()=>{h=!1,i.forEach(o=>{o.style.transition=""})},i.length*100+600)},t.length*50+300)}function Y(e){const t=w[e];if(!t)return;y=e,p=0,Q.textContent=t.title,ee.textContent=t.description,te.innerHTML=t.details.map((o,s)=>`<li class="flex items-start opacity-0" style="animation: fadeInUp 0.5s ease forwards ${s*.1}s">
      <span class="text-[var(--acento)] mr-2">‚Ä¢</span>
      <span>${o}</span>
    </li>`).join("");const i=new Image;i.onload=()=>{d.src=t.images[p],d.style.opacity="1"},i.src=t.images[p],f.classList.remove("hidden"),f.classList.add("flex"),f.style.opacity="0",requestAnimationFrame(()=>{f.style.transition="opacity 0.3s ease",f.style.opacity="1"}),document.body.style.overflow="hidden",document.body.style.position="fixed",document.body.style.width="100%",document.body.style.top=`-${window.scrollY}px`,t.images.slice(1).forEach(o=>{const s=new Image;s.src=o})}function T(){f.style.opacity="0",setTimeout(()=>{f.classList.add("hidden"),f.classList.remove("flex");const e=document.body.style.top;document.body.style.position="",document.body.style.top="",document.body.style.width="",document.body.style.overflow="",window.scrollTo(0,parseInt(e||"0")*-1),y=null,p=0,f.style.opacity=""},300)}function ie(e="next"){if(!y||h)return;h=!0;const t=w[y],i=e==="next"?"translateX(-100px)":"translateX(100px)";d.style.transition="all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",d.style.opacity="0",d.style.transform=i,setTimeout(()=>{d.src=t.images[p];const o=e==="next"?"translateX(100px)":"translateX(-100px)";d.style.transition="none",d.style.transform=o,d.offsetHeight,d.style.transition="all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",d.style.opacity="1",d.style.transform="translateX(0)",setTimeout(()=>{h=!1,d.style.transition="",d.style.transform=""},300)},300)}function R(){if(!y||h)return;const e=w[y];p=(p-1+e.images.length)%e.images.length,ie("prev")}function F(){if(!y||h)return;const e=w[y];p=(p+1)%e.images.length,ie("next")}function xe(e){P=e.changedTouches[0].screenX}function be(e){O=e.changedTouches[0].screenX,Le()}function Le(){O<P-50&&F(),O>P+50&&R()}function Ie(){if(document.getElementById("projects-animations"))return;const e=document.createElement("style");e.id="projects-animations",e.textContent=`
    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
  `,document.head.appendChild(e)}function G(){if(Ie(),S=document.querySelectorAll(".filter-btn"),A=document.querySelectorAll(".project-card"),f=document.getElementById("project-modal"),Q=document.getElementById("modal-title"),ee=document.getElementById("modal-description"),te=document.getElementById("modal-details"),d=document.getElementById("carousel-image"),C=document.getElementById("carousel-container"),$=document.getElementById("carousel-prev"),k=document.getElementById("carousel-next"),q=document.getElementById("modal-close"),!S.length||!A.length||!f){console.warn("ProjectsGrid: No se encontraron todos los elementos necesarios");return}S.forEach(e=>{e.addEventListener("click",()=>{X(e.dataset.filter)})}),A.forEach(e=>{e.addEventListener("click",()=>{const t=e.dataset.project;Y(t)}),e.setAttribute("tabindex","0"),e.addEventListener("keydown",t=>{if(t.key==="Enter"||t.key===" "){t.preventDefault();const i=e.dataset.project;Y(i)}})}),q.addEventListener("click",T),$.addEventListener("click",R),k.addEventListener("click",F),C&&(C.addEventListener("touchstart",xe,{passive:!0}),C.addEventListener("touchend",be,{passive:!0})),f.addEventListener("click",e=>{e.target===f&&T()}),document.addEventListener("keydown",e=>{e.key==="Escape"&&!f.classList.contains("hidden")&&T()}),document.addEventListener("keydown",e=>{f.classList.contains("hidden")||(e.key==="ArrowLeft"?(e.preventDefault(),R()):e.key==="ArrowRight"&&(e.preventDefault(),F()))}),X(K),console.log("ProjectsGrid: Inicializado correctamente ‚úì"),console.log("- Soporte t√°ctil: ‚úì"),console.log("- Navegaci√≥n por teclado: ‚úì"),console.log("- Animaciones optimizadas: ‚úì")}const c={validation:{nombre:{minLength:3,maxLength:100,pattern:/^[a-z√°√©√≠√≥√∫√±A-Z√Å√â√ç√ì√ö√ë\s]+$/,errorMessages:{empty:"El nombre es obligatorio",minLength:"El nombre debe tener al menos 3 caracteres",pattern:"El nombre solo puede contener letras y espacios"}},telefono:{pattern:/^[0-9]{9,15}$/,errorMessages:{empty:"El tel√©fono es obligatorio",pattern:"El tel√©fono debe tener entre 9 y 15 d√≠gitos"}},email:{pattern:/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,6}$/,errorMessages:{empty:"El email es obligatorio",pattern:"El email no tiene un formato v√°lido"}},descripcion:{minLength:20,maxLength:1e3,errorMessages:{empty:"La descripci√≥n del proyecto es obligatoria",minLength:"La descripci√≥n debe tener al menos 20 caracteres",maxLength:"La descripci√≥n no puede superar los 1000 caracteres"}},fotos:{maxFiles:5,maxSize:5*1024*1024,allowedTypes:["image/jpeg","image/jpg","image/png","image/webp"],errorMessages:{maxFiles:"Solo puedes subir un m√°ximo de 5 fotos",maxSize:"Cada foto no puede superar los 5MB",invalidType:"Solo se permiten archivos JPG, PNG o WEBP"}}},selectors:{form:"#contact-form",fields:{nombre:"#nombre",telefono:"#telefono",email:"#email",descripcion:"#descripcion",fotos:"#fotos",privacidad:"#privacidad"},dropArea:"#drop-area",previewContainer:"#preview-container",photoCounter:"#photo-counter",photoCount:"#photo-count",submitButton:"#submit-button",buttonText:"#button-text",buttonLoading:"#button-loading",formMessage:"#form-message"}},m={isSubmitting:!1,selectedFiles:[],validationErrors:{}};let n={};function I(e,t){const i=c.validation[e];return i?!t||t.trim()===""?{valid:!1,error:i.errorMessages.empty}:i.minLength&&t.length<i.minLength?{valid:!1,error:i.errorMessages.minLength}:i.maxLength&&t.length>i.maxLength?{valid:!1,error:i.errorMessages.maxLength}:i.pattern&&!i.pattern.test(t)?{valid:!1,error:i.errorMessages.pattern}:{valid:!0}:{valid:!0}}function Ae(e){const t=c.validation.fotos,i=[];if(e.length>t.maxFiles)return{valid:!1,error:t.errorMessages.maxFiles};for(let o=0;o<e.length;o++){const s=e[o];t.allowedTypes.includes(s.type)||i.push(`${s.name}: ${t.errorMessages.invalidType}`),s.size>t.maxSize&&i.push(`${s.name}: ${t.errorMessages.maxSize}`)}return i.length>0?{valid:!1,error:i.join(`
`)}:{valid:!0}}function b(e,t){const i=n.fields[e];if(!i)return;i.classList.add("border-red-500","focus:ring-red-500"),i.classList.remove("border-gray-300","focus:ring-[#0D3B66]");const o=i.parentElement.querySelector(".error-message");o&&(o.textContent=t,o.classList.remove("hidden")),m.validationErrors[e]=t}function u(e){const t=n.fields[e];if(!t)return;t.classList.remove("border-red-500","focus:ring-red-500"),t.classList.add("border-gray-300","focus:ring-[#0D3B66]");const i=t.parentElement.querySelector(".error-message");i&&(i.textContent="",i.classList.add("hidden")),delete m.validationErrors[e]}function Ce(){let e=!0;return["nombre","telefono","email","descripcion"].forEach(t=>{const i=n.fields[t];if(!i)return;const o=I(t,i.value);o.valid?u(t):(b(t,o.error),e=!1)}),n.fields.privacidad.checked?u("privacidad"):(b("privacidad","Debes aceptar la pol√≠tica de privacidad"),e=!1),e}function ne(e){const t=Ae(e);if(!t.valid){alert(t.error);return}m.selectedFiles=Array.from(e),oe(m.selectedFiles),se()}function oe(e){n.previewContainer.innerHTML="",n.previewContainer.classList.remove("hidden"),e.forEach((t,i)=>{const o=new FileReader;o.onload=s=>{const r=Se(s.target.result,t.name,i);n.previewContainer.appendChild(r)},o.readAsDataURL(t)})}function Se(e,t,i){const o=document.createElement("div");return o.className="relative group",o.innerHTML=`
    <img src="${e}" alt="${t}" 
         class="w-full h-24 sm:h-32 object-cover rounded-lg border-2 border-gray-200 group-hover:border-[#0D3B66] transition-all">
    
    <button type="button" 
            class="absolute top-1 right-1 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center hover:bg-red-600 transition-all shadow-md opacity-0 group-hover:opacity-100"
            onclick="window.contactForm.removeImage(${i})"
            title="Eliminar imagen">
      ‚úï
    </button>
    
    <p class="text-xs text-gray-600 mt-1 truncate" title="${t}">
      ${t}
    </p>
  `,o}function we(e){m.selectedFiles.splice(e,1),m.selectedFiles.length===0?(n.previewContainer.classList.add("hidden"),n.photoCounter.classList.add("hidden"),n.fields.fotos.value=""):oe(m.selectedFiles),se()}function se(){const e=m.selectedFiles.length;e===0?n.photoCounter.classList.add("hidden"):(n.photoCounter.classList.remove("hidden"),n.photoCount.textContent=e)}function De(e){e.preventDefault(),e.stopPropagation(),n.dropArea.classList.add("border-[#0D3B66]","bg-blue-50")}function Te(e){e.preventDefault(),e.stopPropagation(),n.dropArea.classList.remove("border-[#0D3B66]","bg-blue-50")}function Be(e){e.preventDefault(),e.stopPropagation(),n.dropArea.classList.remove("border-[#0D3B66]","bg-blue-50");const t=e.dataTransfer.files;t.length>0&&ne(t)}function B(e,t){n.formMessage.classList.remove("hidden","bg-green-100","bg-red-100","text-green-800","text-red-800"),e==="success"?n.formMessage.classList.add("bg-green-100","text-green-800"):n.formMessage.classList.add("bg-red-100","text-red-800"),n.formMessage.textContent=t,n.formMessage.scrollIntoView({behavior:"smooth",block:"nearest"}),setTimeout(()=>{n.formMessage.classList.add("hidden")},5e3)}function U(e){m.isSubmitting=e,e?(n.submitButton.disabled=!0,n.submitButton.classList.add("opacity-50","cursor-not-allowed"),n.buttonText.classList.add("hidden"),n.buttonLoading.classList.remove("hidden")):(n.submitButton.disabled=!1,n.submitButton.classList.remove("opacity-50","cursor-not-allowed"),n.buttonText.classList.remove("hidden"),n.buttonLoading.classList.add("hidden"))}function Pe(){return{nombre:n.fields.nombre.value.trim(),telefono:n.fields.telefono.value.trim(),email:n.fields.email.value.trim(),descripcion:n.fields.descripcion.value.trim(),fotos:m.selectedFiles.map(e=>({name:e.name,size:e.size,type:e.type})),privacidadAceptada:n.fields.privacidad.checked,timestamp:new Date().toISOString()}}async function Oe(e){if(e.preventDefault(),!m.isSubmitting){if(!Ce()){B("error","Por favor, corrige los errores antes de enviar el formulario");return}U(!0);try{const t=Pe();console.log("üìß DATOS DEL FORMULARIO:",t),console.log("üì∑ ARCHIVOS ADJUNTOS:",m.selectedFiles),await new Promise(i=>setTimeout(i,1500)),B("success","¬°Formulario enviado correctamente! Nos pondremos en contacto contigo pronto."),Re()}catch(t){console.error("‚ùå Error al enviar el formulario:",t),B("error","Hubo un error al enviar el formulario. Por favor, int√©ntalo de nuevo.")}finally{U(!1)}}}function Re(){n.form.reset(),m.selectedFiles=[],m.validationErrors={},n.previewContainer.classList.add("hidden"),n.previewContainer.innerHTML="",n.photoCounter.classList.add("hidden"),["nombre","telefono","email","descripcion","privacidad"].forEach(e=>{u(e)})}function Fe(){n.fields.nombre.addEventListener("blur",()=>{const e=I("nombre",n.fields.nombre.value);e.valid?u("nombre"):b("nombre",e.error)}),n.fields.telefono.addEventListener("blur",()=>{const e=I("telefono",n.fields.telefono.value);e.valid?u("telefono"):b("telefono",e.error)}),n.fields.email.addEventListener("blur",()=>{const e=I("email",n.fields.email.value);e.valid?u("email"):b("email",e.error)}),n.fields.descripcion.addEventListener("blur",()=>{const e=I("descripcion",n.fields.descripcion.value);e.valid?u("descripcion"):b("descripcion",e.error)}),["nombre","telefono","email","descripcion"].forEach(e=>{n.fields[e].addEventListener("input",()=>{m.validationErrors[e]&&u(e)})}),n.fields.privacidad.addEventListener("change",()=>{n.fields.privacidad.checked&&u("privacidad")}),n.fields.fotos.addEventListener("change",e=>{e.target.files.length>0&&ne(e.target.files)}),n.dropArea.addEventListener("click",()=>{n.fields.fotos.click()}),n.dropArea.addEventListener("dragover",De),n.dropArea.addEventListener("dragleave",Te),n.dropArea.addEventListener("drop",Be),n.form.addEventListener("submit",Oe)}function V(){const e=document.querySelector(c.selectors.form);if(!e){console.log("ContactForm: No se encontr√≥ el formulario en esta p√°gina");return}n={form:e,fields:{nombre:document.querySelector(c.selectors.fields.nombre),telefono:document.querySelector(c.selectors.fields.telefono),email:document.querySelector(c.selectors.fields.email),descripcion:document.querySelector(c.selectors.fields.descripcion),fotos:document.querySelector(c.selectors.fields.fotos),privacidad:document.querySelector(c.selectors.fields.privacidad)},dropArea:document.querySelector(c.selectors.dropArea),previewContainer:document.querySelector(c.selectors.previewContainer),photoCounter:document.querySelector(c.selectors.photoCounter),photoCount:document.querySelector(c.selectors.photoCount),submitButton:document.querySelector(c.selectors.submitButton),buttonText:document.querySelector(c.selectors.buttonText),buttonLoading:document.querySelector(c.selectors.buttonLoading),formMessage:document.querySelector(c.selectors.formMessage)};const t=Object.entries(n.fields).filter(([i,o])=>!o).map(([i])=>i);if(t.length>0){console.error("ContactForm: Faltan elementos del DOM:",t);return}Fe(),window.contactForm={removeImage:we},console.log("ContactForm: Inicializado correctamente ‚úì")}document.addEventListener("DOMContentLoaded",()=>{typeof z=="function"&&z(),typeof j=="function"&&j(),typeof G=="function"&&G(),typeof V=="function"&&V(),Me()});function Me(){const e=document.getElementById("menuToggle"),t=document.getElementById("mobileMenu");e&&t&&e.addEventListener("click",()=>{const i=!t.classList.contains("hidden");t.classList.toggle("hidden"),i?e.classList.remove("shadow-inner","bg-white/20","scale-95"):e.classList.add("shadow-inner","bg-white/20","scale-95")})}
